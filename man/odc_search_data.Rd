% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/odc_search_data.R
\name{odc_search_data}
\alias{odc_search_data}
\title{Search for Energy Performance Certificates and Display Energy Certificates}
\usage{
odc_search_data(
  type = c("domestic", "non_domestic", "dislay"),
  paginate = c("none", "all", "manual"),
  max_pages = NULL,
  max_records = NULL,
  ...
)
}
\arguments{
\item{type}{\code{character} The \strong{type of certificate} to search for. Must be one of:
\itemize{
\item \code{"domestic"}: Domestic Energy Performance Certificates (homes)
\item \code{"non_domestic"}: Non-domestic Energy Performance Certificates (business premises)
\item \code{"display"}: Display Energy Certificates (public buildings)
}}

\item{paginate}{\code{character} \strong{Pagination control mode}. Must be one of:
\itemize{
\item \code{"none"}: Fetch only the first page of results (default, fastest)
\item \code{"all"}: Automatically retrieve all available pages
\item \code{"manual"}: Fetch first page and display continuation token for manual control
}}

\item{max_pages}{\code{integer} or \code{NULL}. \strong{Maximum pages} to retrieve when \code{paginate = "all"}.
Useful for limiting large queries during testing. Ignored in other modes.}

\item{max_records}{\code{integer} or \code{NULL}. \strong{Maximum total records} to retrieve.
When specified, automatically switches \code{paginate = "all"} and fetches records
across multiple pages until the limit is reached. Efficiently adjusts page sizes.}

\item{...}{\strong{Search filters} passed as name-value pairs. Common parameters include:
\itemize{
\item \code{address}: \code{character}  Address search string (e.g., \code{"Downing Street"})
\item \code{postcode}: \code{character}  UK postcode, full or partial (e.g., \code{"SW1A"}, \code{"SW1A 1AA"})
\item \code{local_authority}: \code{character} Local authority code (e.g., \code{"E09000030"})
\item \code{from_date}, \code{to_date}: \code{character} Date range in \code{"YYYY-MM"} format
\item \code{property_type}: \code{character} Property type (e.g., \code{"house"}, \code{"flat"})
\item \code{size}: \code{integer} Page size (1-5000, defaults to 25)
}

\strong{Note:} Parameters with hyphens in the API (\code{local-authority}) can be
written with underscores instead (\code{local_authority}).}
}
\value{
A \link[tibble:tibble-package]{tibble} containing certificate records matching the
search criteria. The tibble includes all available fields from the API.
Returns an empty tibble if no matches are found.
}
\description{
This function allows to search for energy certificates from the Open Data
Communities API. It provides access to \emph{Domestic}, \emph{Non-domestic}, and \emph{Display} Certificates, with full support for pagination.
}
\examples{
\dontrun{
# Basic search for domestic certificates by postcode
odc_search_data("domestic", postcode = "SW1A 1AA")

# Search non-domestic certificates with address filter
odc_search_data("non_domestic", address = "London", size = 100)

# Search Display Energy Certificates with authority filter
odc_search_data("display", local_authority = "E09000030")

# Get exactly 500 records (automatically paginates)
odc_search_data("domestic", max_records = 500, postcode = "SW1A")

# Manual pagination control
first_page <- odc_search_data("domestic", paginate = "manual",
                              address = "Manchester")
# Use token from message to get next page manually

# Complex search with multiple filters
odc_search_data(
  "domestic",
  paginate = "all",
  max_records = 1000,
  postcode = "SW1A",
  from_date = "2020-01",
  to_date = "2023-12",
  property_type = "flat"
)
}
}
